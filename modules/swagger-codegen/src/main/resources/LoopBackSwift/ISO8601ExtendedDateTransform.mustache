//
// Generated by swagger-codegen, do not edit!
// https://github.com/ConnectCorp/swagger-codegen
//
//  Copyright Â© 2016 Connect. All rights reserved.
//

import Foundation
import ObjectMapper

public class ISO8601ExtendedDateTransform : DateFormatterTransform {

    private let altNoMillisecondsTransform: DateFormatterTransform
    private let altAllDayFormatterTransform: DateFormatterTransform

    public init() {
        let formatter = NSDateFormatter()

        formatter.locale = NSLocale(localeIdentifier: "en_US_POSIX")
        formatter.dateFormat = "yyyy-MM-dd'T'HH:mm:ss.SSSZZZZZ"

        let noMillisecondsFormatter = NSDateFormatter()
        noMillisecondsFormatter.locale = NSLocale(localeIdentifier: "en_US_POSIX")
        noMillisecondsFormatter.dateFormat = "yyyy-MM-dd'T'HH:mm:ssZZZZZ"
        altNoMillisecondsTransform = DateFormatterTransform(dateFormatter: noMillisecondsFormatter)

        let allDayFormatter = NSDateFormatter()
        allDayFormatter.locale = NSLocale(localeIdentifier: "en_US_POSIX")
        allDayFormatter.dateFormat = "yyyy-MM-dd"
        altAllDayFormatterTransform = DateFormatterTransform(dateFormatter: allDayFormatter)

        super.init(dateFormatter: formatter)
    }

    public override func transformFromJSON(value: AnyObject?) -> NSDate? {
        return super.transformFromJSON(value) ?? altNoMillisecondsTransform.transformFromJSON(value) ?? altAllDayFormatterTransform.transformFromJSON(value)
    }
}